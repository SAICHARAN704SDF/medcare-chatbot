<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Assessment - MEDCARE</title>
<link rel="stylesheet" href="/static/css/style.css"></head><body>
<div class="header container"><div style="display:flex;gap:12px;align-items:center"><div class="logo"></div><div><div class="h1">Assessment</div><div class="small">10 quick questions</div></div></div></div>
<div class="container" style="min-height:70vh">
  <div class="card" style="max-width:900px;margin:0 auto">
    <h3>Assessment</h3><p class="small">Answer honestly â€” this is anonymized.</p>
    <form id="f">
<div style="margin-top:12px"><label style="font-weight:700">1. How often felt anxious in past 2 weeks?</label><input name="q1" type="range" min="1" max="10" value="5" oninput="o1.innerText=this.value" style="width:100%"><div class="small">Value: <span id="o1">5</span></div></div><div style="margin-top:12px"><label style="font-weight:700">2. Rate sleep quality (1 poor - 10 excellent)</label><input name="q2" type="range" min="1" max="10" value="5" oninput="o2.innerText=this.value" style="width:100%"><div class="small">Value: <span id="o2">5</span></div></div><div style="margin-top:12px"><label style="font-weight:700">3. How manageable is your workload? (1-10)</label><input name="q3" type="range" min="1" max="10" value="5" oninput="o3.innerText=this.value" style="width:100%"><div class="small">Value: <span id="o3">5</span></div></div><div style="margin-top:12px"><label style="font-weight:700">4. Frequency of feeling overwhelmed (1-10)</label><input name="q4" type="range" min="1" max="10" value="5" oninput="o4.innerText=this.value" style="width:100%"><div class="small">Value: <span id="o4">5</span></div></div><div style="margin-top:12px"><label style="font-weight:700">5. Trouble concentrating (1-10)</label><input name="q5" type="range" min="1" max="10" value="5" oninput="o5.innerText=this.value" style="width:100%"><div class="small">Value: <span id="o5">5</span></div></div><div style="margin-top:12px"><label style="font-weight:700">6. Overall mood (1-10)</label><input name="q6" type="range" min="1" max="10" value="5" oninput="o6.innerText=this.value" style="width:100%"><div class="small">Value: <span id="o6">5</span></div></div><div style="margin-top:12px"><label style="font-weight:700">7. Irritability frequency (1-10)</label><input name="q7" type="range" min="1" max="10" value="5" oninput="o7.innerText=this.value" style="width:100%"><div class="small">Value: <span id="o7">5</span></div></div><div style="margin-top:12px"><label style="font-weight:700">8. Avoided social interactions due to stress? (1-10)</label><input name="q8" type="range" min="1" max="10" value="5" oninput="o8.innerText=this.value" style="width:100%"><div class="small">Value: <span id="o8">5</span></div></div><div style="margin-top:12px"><label style="font-weight:700">9. Academic worries affecting sleep (1-10)</label><input name="q9" type="range" min="1" max="10" value="5" oninput="o9.innerText=this.value" style="width:100%"><div class="small">Value: <span id="o9">5</span></div></div><div style="margin-top:12px"><label style="font-weight:700">10. Confidence in managing stress (1-10)</label><input name="q10" type="range" min="1" max="10" value="5" oninput="o10.innerText=this.value" style="width:100%"><div class="small">Value: <span id="o10">5</span></div></div>      <div style="margin-top:16px;display:flex;justify-content:space-between;align-items:center">
        <div class="small">Progress: <span id="progress">0%</span></div>
        <div><button class="btn" type="submit">Submit</button></div>
      </div>
    </form>
    <div id="msg" class="small" style="margin-top:10px"></div>
  </div>
</div>
<script>
function updateProgress(){ const inputs=document.querySelectorAll('input[type=range]'); let sum=0; inputs.forEach(i=>sum+=parseInt(i.value)); const pct=Math.round((sum/(inputs.length*10))*100); document.getElementById('progress').innerText = pct + '%'; }
document.querySelectorAll('input[type=range]').forEach(i=>i.addEventListener('input',updateProgress));
document.getElementById('f').addEventListener('submit', async function(e){ e.preventDefault(); const fd=new FormData(e.target); let answers={}, sum=0; for(const [k,v] of fd.entries()){answers[k]=v; sum+=parseInt(v);} const score=Math.round((sum/(10*10))*100); const uid = localStorage.getItem('medcare_user') || prompt('Student ID','S1001') || 'guest'; localStorage.setItem('medcare_user', uid); const res = await fetch('/api/assessment',{method:'POST',headers:{'Content-Type':'application/json'},body: JSON.stringify({user_id:uid,score:score,answers:answers})}); const j = await res.json(); if(res.ok){ if(j.redirect){ window.location = j.redirect; } else { document.getElementById('msg').innerText = 'Saved: ' + j.label + ' Score: ' + score; setTimeout(()=>location.href='/dashboard',800); } } else { document.getElementById('msg').innerText = j.error || 'Error'; } }); updateProgress();
</script></body></html>
