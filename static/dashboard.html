<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Dashboard</title><link rel="stylesheet" href="/static/styles.css"><script src="https://cdn.jsdelivr.net/npm/chart.js"></script></head><body>
<div class="container"><div class="header"><div style="display:flex;gap:12px;align-items:center"><div class="logo"></div><div><strong>MEDCARE</strong><div class="small">Dashboard</div></div></div><div><a href="/login.html" class="small">Switch</a></div></div>
<div class="card"><h3>Latest Score</h3><div id="latest" class="small">Loading...</div></div>
<div class="card" style="margin-top:12px"><h3>Progress</h3><canvas id="chart" style="max-height:300px"></canvas></div>
<div class="card" style="margin-top:12px"><h3>Quick Actions</h3><div style="display:flex;gap:8px"><a class="btn" href="/assessment.html">Take Assessment</a><a class="btn-outline" href="/chatbot/index.html">Chat</a><a class="btn-outline" href="/music.html">Music</a></div></div>
<div class="footer small">Tip: take assessments regularly.</div></div>
<script>
async function load(){ const uid=localStorage.getItem('medcare_user')||'demo_user'; const r=await fetch('/api/user/'+uid+'/history'); const data=await r.json(); if(!data||data.length==0){document.getElementById('latest').innerText='No data'; return;} document.getElementById('latest').innerText=data[0].score + ' ('+data[0].label+') â€¢ ' + new Date(data[0].ts).toLocaleString(); const labels=data.map(x=>new Date(x.ts).toLocaleDateString()).reverse(); const scores=data.map(x=>x.score).reverse(); new Chart(document.getElementById('chart'),{type:'line',data:{labels:labels,datasets:[{label:'Stress',data:scores,borderColor:'#2d7f88',tension:0.3}]}}); }
load();
</script></body></html>
